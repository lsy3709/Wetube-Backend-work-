# 11. 프롬프트 답변 문서화

08_프롬프트_명령어_기록.md 에 기록된 질문(프롬프트)에 대한 답변·내용을 문서로 정리합니다.

---

## 1. 실행 순서 (10 문서 1.1)

**Q.** 1.1 순서도에서 __main__.py 가 먼저 실행되는 게 맞나요? 정확한 실행·순서·동작 원리.

**A.** 아니요. **항상 __init__.py 가 먼저** 실행됩니다.

| 실행 방법 | 순서 | 동작 |
|-----------|------|------|
| **flask run** | ① `app/__init__.py` 만 실행 | Flask CLI가 `app` 패키지를 import → __init__.py 실행 → `app = create_app()`. __main__.py 는 실행되지 않음. |
| **python -m app** | ① `app/__init__.py` → ② `app/__main__.py` | 패키지 로드로 __init__.py 먼저 → 그 다음 __main__.py 에서 `from app import app`, `app.run()`. |

- **__init__.py**: 패키지가 import될 때 항상 가장 먼저 실행. `db`, `create_app()`, `app = create_app()` 정의.
- **__main__.py**: `python -m app` 일 때만 실행되며, __init__.py 실행 이후에 실행.

---

## 2. __init__.py 89-98 각 코드 주석

**Q.** 89-98 라인 각 코드에 주석 달아달라.

**A.** 추가한 주석 요약:

- `with app.app_context():` — 앱 컨텍스트 안에서만 DB 작업(create_all, session 등) 가능.
- `db.create_all()` — 등록된 모델(User, Video) 기준으로 테이블 생성. 없으면 생성, 있으면 스킵.
- `if User.query.get(1) is None:` — user_id=1 이 없으면 DEFAULT_USER_ID(1) 사용 불가하므로 기본 유저 생성.
- `default_user = User(...)` — 기본 유저 인스턴스 (실제 로그인·비밀번호 검증 없음).
- `db.session.add(default_user)` / `db.session.commit()` — 세션에 추가 후 DB에 반영.

---

## 3. db 객체 출처

**Q.** db 객체는 어디서 나왔나요?

**A.** **app/__init__.py 19번째 줄** 에서 정의됩니다.

- `db = SQLAlchemy()` (모듈 레벨)
- 흐름: ① 모듈 로드 시 `db = SQLAlchemy()` 생성 → ② `create_app()` 안에서 `db.init_app(app)` 로 앱에 연결 → ③ `with app.app_context(): db.create_all()` 에서 같은 `db` 사용.

---

## 4. SECRET_KEY="dev-frontend-only" 사용 의미

**Q.** SECRET_KEY="dev-frontend-only" 사용의미 / 주석 추가.

**A.**

- **역할**: Flask가 세션 쿠키, `flash()` 메시지, CSRF 토큰 등을 **서명·암호화**할 때 사용.
- **"dev-frontend-only"**: 개발·프론트 전용이라 임시로 넣은 고정 문자열.
- **운영 시**: 환경변수 등으로 **강한 랜덤 키** 사용 필수. 코드에 직접 넣지 말 것.

---

## 5. SQLALCHEMY_TRACK_MODIFICATIONS=False 사용 의미

**Q.** SQLALCHEMY_TRACK_MODIFICATIONS=False 사용의미 주석.

**A.**

- **True**: 모델 객체 속성 변경을 추적. `commit` 시 변경 필드 반영, `before_commit` 등 이벤트 사용 가능. 오버헤드 있음.
- **False**: 위 추적 비활성화. 이벤트·변경 감지가 꼭 필요 없으면 **False** 권장. Flask-SQLAlchemy 기본 권장값.

---

## 6. flask run / 직접 실행( python -m app ) 차이점

**Q.** flask run 과 직접 실행 시 진입점( python -m app 또는 python app/__init__.py )의 차이점? 주석 추가.

**A.** __init__.py 에 반영한 내용:

| 실행 방법 | `if __name__ == "__main__"` 블록 실행 여부 | 서버를 띄우는 주체 |
|-----------|--------------------------------------------|--------------------|
| **flask run** | 실행 안 함 | Flask CLI (Werkzeug 서버) |
| **python -m app** | 실행 안 함 (실행되는 건 __main__.py) | __main__.py 의 `app.run()` |
| **python app/__init__.py** | 실행됨 | __init__.py 의 `app.run()` |

---

## 7. 무엇을 하는 게 좋은가요?

**Q.** 무엇을 하는 게 좋은가요?

**A.** 제안한 항목:

- **바로**: 실행·동작 확인, Git 푸시, `.gitignore` 추가( __pycache__, instance, uploads 등).
- **기능 확장**: 로그인 연동, 영상 재생(/watch), Studio 목록 DB 연동, visibility(공개 설정) 반영.

---

## 8. flask run / python -m app 실행 시 무엇이 좋은가요?

**Q.** flask run 과 python -m app 실행 시 무엇이 좋은가요?

**A.** **flask run** 추천.

- **flask run**: 리로더 기본 ON(코드 수정 시 자동 재시작), FLASK_APP·FLASK_DEBUG 등 Flask 규약 사용. 개발 시 편함.
- **python -m app**: Flask CLI 없이 실행할 때, 또는 __main__.py 에서만 하고 싶은 초기화가 있을 때 사용.

---

## 9. flask run 만 해도 되나요? (FLASK_APP)

**Q.** set FLASK_APP=app / flask run — flask run 만 해도 되나요?

**A.**

- **flask run 만** 하면 FLASK_APP 이 없어서 앱을 못 찾을 수 있음.
- **해결**: ch05 루트에 **.flaskenv** 파일 생성, `FLASK_APP=app` 한 줄 넣기. 그러면 `flask run` 만 해도 Flask CLI가 자동으로 FLASK_APP 을 읽음. (python-dotenv 가 있어야 함, requirements.txt 에 포함됨.)

---

## 10. 터미널은 가상환경 자동 안 잡히고, 파워쉘은 자동 잡히는 이유

**Q.** 해당 터미널에 들어왔을 때는 가상환경이 자동으로 안 잡히고, 파워쉘로 접속했을 때는 자동으로 가상환경이 잡히는 이유?

**A.**

- **PowerShell**: `$PROFILE` 등에 `venv\Scripts\Activate.ps1` 실행이 들어가 있거나, PowerShell을 열 때 자동 실행되는 스크립트가 있으면 가상환경이 자동 활성화됨.
- **Cursor(해당) 터미널**: Cursor/VS Code 통합 터미널은 별도 설정을 쓰며, **Python 인터프리터**가 이 워크스페이스에서 venv 로 선택되어 있고, **Python › Terminal: Activate Environment** 가 켜져 있어야 터미널에서 자동 활성화됨.
- **Cursor에서 자동 잡히게 하려면**: `Python: Select Interpreter` 로 ch05\venv\Scripts\python.exe 선택, `Python › Terminal: Activate Environment` 켜기. 또는 `.vscode/settings.json` 에 `python.defaultInterpreterPath`, `python.terminal.activateEnvironment: true` 설정.

---

## 11. Flask(__name__) 이름 설정·위치·파일

**Q.** `Flask(__name__)`: 현재 모듈 이름으로 앱 생성. 이름을 어디서 설정 및 받고 있나요? 위치? 파일?

**A.**

- **설정하는 곳 없음.** Python이 모듈을 로드할 때 `__name__` 을 자동으로 채움.
- **받는 곳:** `Flask(__name__)` 생성자 인자. 즉 **현재 모듈 이름**을 Flask에 넘김.
- **위치·파일:** `app/__init__.py`, `create_app()` 안의 `app = Flask(__name__)`.
- 패키지 `app` 으로 import 되면 `__name__` 은 `"app"`. `python app/__init__.py` 로 직접 실행하면 `"__main__"`.
- Flask는 이 이름으로 앱 루트 경로(템플릿·정적 파일), 디버그·로깅에서 사용.

---

## 12. 기본값 이름이 app 인가요? 변경 가능한가요?

**Q.** 기본값 이름이 app 인가요? 아니면 변경이 가능한가요?

**A.**

- **기본값이 "app"인 것은 아님.** 패키지 이름이 `app` 이라서 `__name__` 이 `"app"` 이 되는 것.
- **변경 가능.** `Flask("원하는이름")` 처럼 문자열을 넘기면 됨. 예: `Flask("my_webtube")`.
- **주의:** 존재하지 않는 모듈 이름을 주면 루트 경로가 달라져 템플릿·정적 파일을 못 찾을 수 있음. **`Flask(__name__)` 유지 권장.**

---

## 13. 가상환경 접근 명령어

**Q.** 가상환경 접근 명령어

**A.**

| 환경 | 활성화 | 비활성화 |
|------|--------|----------|
| **PowerShell** (ch05 안) | `.\venv\Scripts\Activate.ps1` | `deactivate` |
| **CMD** (ch05 안) | `venv\Scripts\activate.bat` | `deactivate` |
| **Linux/Mac** (ch05 안) | `source venv/bin/activate` | `deactivate` |

- 프로젝트 루트(ch05)에서: `ch05\venv\Scripts\Activate.ps1` (PowerShell), `ch05\venv\Scripts\activate.bat` (CMD).
- 활성화되면 프롬프트 앞에 `(venv)` 표시됨.

---

## 14. 문서화 .md

**Q.** 문서화 .md

**A.** docs 폴더 내 문서 목록:

| 순번 | 파일명 | 내용 |
|------|--------|------|
| 01 | 01_개요.md | 작업 개요, 문서 목차 |
| 02 | 02_설정_Config.md | app config (업로드 폴더, 제한, DB) |
| 03 | 03_모델_Models.md | User, Video 모델 정의 |
| 04 | 04_업로드_라우트.md | studio upload 라우트 및 검증 로직 |
| 05 | 05_템플릿_및_JS.md | upload.html, studio-upload-page.js |
| 06 | 06_사용_및_테스트.md | 사용 방법, 에러 케이스, 문제 해결 |
| 07 | 07_작업_체크리스트.md | Studio 로그인 미연동 등 작업 체크리스트 |
| 08 | 08_프롬프트_명령어_기록.md | AI 프롬프트·수행 작업 기록 |
| 09 | 09_개념_어원_동작원리_문법_사용법.md | 개념·어원·동작 원리·문법·사용법 |
| 10 | 10_코드_주석_개념_다이어그램_문법_사용법.md | 코드 주석·Mermaid 다이어그램·문법·사용법 |
| 11 | 11_프롬프트_답변_문서화.md | 프롬프트 질문·답변 정리 |

---

## 참고

- 프롬프트 번호·목록은 **08_프롬프트_명령어_기록.md** 참고.
- 코드·설정 변경 내용은 각 해당 파일( __init__.py, .flaskenv 등)과 **10_코드_주석_개념_다이어그램_문법_사용법.md** 에 반영됨.
