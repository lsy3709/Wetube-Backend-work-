# 05. 템플릿 및 JS

## 1. 업로드 템플릿 (`app/templates/studio/upload.html`)

### Flash 메시지

- `get_flashed_messages(with_categories=true)`로 서버에서 보낸 메시지 표시.
- 각 메시지: `auth-msg auth-msg--{{ category }} is-visible` (category: `error`, `success` 등).

### 폼

- **action**: `{{ url_for('studio.upload') }}`
- **method**: `post`
- **enctype**: `multipart/form-data`
- **필드**
  - `video`: file, 필수, `accept="video/*"`
  - `title`: text, 필수, `maxlength="200"`, `value="{{ title or '' }}"`
  - `description`: textarea, 선택, `maxlength="5000"`, 내용 `{{ description or '' }}`
  - `thumbnail`: file, 선택, `accept="image/*"`
  - `visibility`: select (현재 업로드 처리에서는 미사용)

에러 후 다시 렌더할 때 `title`, `description`을 넘기므로 입력값이 유지된다.

### 기타

- `#upload-msg`: 클라이언트 측 검증/상태 메시지용.
- 업로드 버튼: `id="upload-submit-btn"`.

## 2. 스크립트 (`app/static/js/studio-upload-page.js`)

### 역할

- 로그인 상태일 때만 동작 (`sessionStorage` 기준).
- 비디오 선택 시 용량·타입 검사, 선택/제거 UI.
- 썸네일 선택 시 용량·타입 검사, 미리보기·제거.
- **폼 제출**: 클라이언트 검증만 수행하고, 통과 시 **서버로 실제 제출** (preventDefault 하지 않음).

### 제출 시 검증 (클라이언트)

- 비디오 파일 없음 → `preventDefault`, "동영상 파일을 선택해주세요." 표시.
- 제목 비어 있음 → `preventDefault`, "제목을 입력해주세요." 표시.
- 위 두 가지 통과 시 → 버튼 비활성화·"업로드 중..." 표시 후 **폼 그대로 POST** (서버에서 확장자·용량 등 추가 검증).

### 상수 (JS 내)

- `MAX_VIDEO_SIZE`: 2GB
- `MAX_THUMBNAIL_SIZE`: 5MB  
  (서버 쪽 config와 맞추어 두는 것이 좋다.)

### 드래그 앤 드롭

- 비디오 파일 영역에 드래그 앤 드롭 지원. 드롭 시 `video` input에 파일이 설정되고 기존 change 로직이 실행된다.
