{% extends "base.html" %}

{% block title %}Query 실행 - 데이터베이스 관리 - WeTube{% endblock %}

{% block content %}
  <div class="admin-page admin-query-page" data-admin-logged-in-only>
    <div class="admin-header">
      <div class="admin-header-left">
        <a href="{{ url_for('admin.database') }}" class="admin-back-link">← 데이터베이스 관리</a>
        <h1 class="admin-title">Query 실행</h1>
      </div>
      <div class="admin-header-actions">
        <button type="button" class="btn btn--outline" id="admin-logout-btn">로그아웃</button>
      </div>
    </div>

    <div class="admin-content">
      <div class="query-section">
        <h3 class="db-section-title">SQL 쿼리 입력</h3>
        <textarea id="db-query" class="db-query-input" placeholder="SELECT * FROM user LIMIT 10;&#10;&#10;-- 지원 문법: SELECT, INSERT, UPDATE, DELETE (프론트엔드 전용)" rows="8"></textarea>
        <div class="db-query-actions">
          <button type="button" class="btn btn--primary" id="btn-execute">실행</button>
          <button type="button" class="btn btn--outline" id="btn-clear">초기화</button>
        </div>
      </div>

      <div class="query-section">
        <h3 class="db-section-title">실행 결과</h3>
        <div class="db-query-result" id="db-query-result">
          <p class="admin-msg-text">쿼리를 입력하고 실행 버튼을 클릭하세요. (프론트엔드 전용)</p>
        </div>
      </div>
    </div>
  </div>

  <div class="admin-logged-out" data-admin-logged-out-only>
    <div class="hero">
      <h1>관리자 권한이 필요합니다</h1>
      <p>이 페이지에 접근하려면 관리자 계정으로 로그인해야 합니다.</p>
      <a href="{{ url_for('auth.login') }}" class="btn btn--primary">로그인</a>
    </div>
  </div>
{% endblock %}

{% block scripts %}
  {{ super() }}
  <script src="{{ url_for('static', filename='js/admin-query-page.js') }}"></script>
{% endblock %}
