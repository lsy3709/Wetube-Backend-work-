{% extends "base.html" %}

{% block title %}ë™ì˜ìƒ ì—…ë¡œë“œ - Studio - WeTube{% endblock %}

{% block content %}
  <div class="studio-page" data-logged-in-only>
    <div class="studio-header">
      <div class="studio-header-top">
        <h1 class="studio-title">ë™ì˜ìƒ ì—…ë¡œë“œ</h1>
        <a href="{{ url_for('studio.index') }}" class="btn btn--outline">ì·¨ì†Œ</a>
      </div>
    </div>

    <div class="upload-container">
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          {% for category, message in messages %}
            <p class="auth-msg auth-msg--{{ category }} is-visible" role="alert">{{ message }}</p>
          {% endfor %}
        {% endif %}
      {% endwith %}
      <p id="upload-msg" class="auth-msg" role="status" aria-live="polite"></p>
      <form id="upload-form" class="upload-form" method="post" action="{{ url_for('studio.upload') }}" enctype="multipart/form-data">
        <!-- ë™ì˜ìƒ íŒŒì¼ ì„ íƒ -->
        <div class="upload-section">
          <label class="upload-section-title">ë™ì˜ìƒ íŒŒì¼ <span class="required">*</span></label>
          <div class="upload-file-area" id="upload-file-area">
            <input type="file" id="upload-video" name="video" accept="video/*" style="display: none;" required>
            <div class="upload-file-placeholder" id="upload-file-placeholder">
              <div class="upload-icon">ğŸ“¹</div>
              <p class="upload-text">ë™ì˜ìƒ íŒŒì¼ì„ ì„ íƒí•˜ê±°ë‚˜ ì—¬ê¸°ì— ë“œë˜ê·¸í•˜ì„¸ìš”</p>
              <label for="upload-video" class="btn btn--primary">íŒŒì¼ ì„ íƒ</label>
              <p class="upload-hint">ìµœëŒ€ íŒŒì¼ í¬ê¸°: 2GB</p>
            </div>
            <div class="upload-file-selected" id="upload-file-selected" style="display: none;">
              <div class="upload-file-info">
                <span class="upload-file-name" id="upload-file-name"></span>
                <span class="upload-file-size" id="upload-file-size"></span>
              </div>
              <button type="button" class="btn btn--outline" id="upload-file-remove">ì œê±°</button>
            </div>
          </div>
        </div>

        <!-- ì œëª© -->
        <div class="upload-section">
          <label for="upload-title" class="upload-section-title">ì œëª© <span class="required">*</span></label>
          <input type="text" id="upload-title" name="title" class="upload-input" placeholder="ë™ì˜ìƒ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" maxlength="200" value="{{ title or '' }}" required>
          <small class="form-hint">ìµœëŒ€ 200ì</small>
        </div>

        <!-- ì„¤ëª… -->
        <div class="upload-section">
          <label for="upload-description" class="upload-section-title">ì„¤ëª…</label>
          <textarea id="upload-description" name="description" class="upload-textarea" placeholder="ë™ì˜ìƒì— ëŒ€í•œ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”" rows="6" maxlength="5000">{{ description or '' }}</textarea>
          <small class="form-hint">ìµœëŒ€ 5000ì</small>
        </div>

        <!-- ì¸ë„¤ì¼ -->
        <div class="upload-section">
          <label class="upload-section-title">ì¸ë„¤ì¼ (ì„ íƒ)</label>
          <div class="upload-thumbnail-area">
            <input type="file" id="upload-thumbnail" name="thumbnail" accept="image/*" style="display: none;">
            <div class="upload-thumbnail-preview" id="upload-thumbnail-preview">
              <div class="upload-thumbnail-placeholder" id="upload-thumbnail-placeholder">
                <span>ğŸ–¼ï¸</span>
                <p>ì¸ë„¤ì¼ ì—†ìŒ</p>
              </div>
              <img id="upload-thumbnail-img" src="" alt="ì¸ë„¤ì¼ ë¯¸ë¦¬ë³´ê¸°" style="display: none;">
            </div>
            <div class="upload-thumbnail-actions">
              <label for="upload-thumbnail" class="btn btn--outline">ì¸ë„¤ì¼ ì„ íƒ</label>
              <button type="button" class="btn btn--outline" id="upload-thumbnail-remove" style="display: none;">ì œê±°</button>
            </div>
          </div>
        </div>

        <!-- ê³µê°œ ì„¤ì • -->
        <div class="upload-section">
          <label for="upload-visibility" class="upload-section-title">ê³µê°œ ì„¤ì • <span class="required">*</span></label>
          <select id="upload-visibility" name="visibility" class="upload-select" required>
            <option value="public">ê³µê°œ</option>
            <option value="unlisted">ì¼ë¶€ ê³µê°œ</option>
            <option value="private">ë¹„ê³µê°œ</option>
          </select>
          <small class="form-hint">ê³µê°œ: ëˆ„êµ¬ë‚˜ ë³¼ ìˆ˜ ìˆìŒ | ì¼ë¶€ ê³µê°œ: ë§í¬ë¥¼ ì•„ëŠ” ì‚¬ëŒë§Œ ë³¼ ìˆ˜ ìˆìŒ | ë¹„ê³µê°œ: ë‚˜ë§Œ ë³¼ ìˆ˜ ìˆìŒ</small>
        </div>

        <!-- ì—…ë¡œë“œ ë²„íŠ¼ -->
        <div class="upload-actions">
          <button type="submit" class="btn btn--primary btn--large" id="upload-submit-btn">
            ì—…ë¡œë“œ
          </button>
          <a href="{{ url_for('studio.index') }}" class="btn btn--outline btn--large">ì·¨ì†Œ</a>
        </div>
      </form>
    </div>
  </div>

  <div class="studio-logged-out" data-logged-out-only>
    <div class="hero">
      <h1>ì—…ë¡œë“œí•˜ë ¤ë©´ ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤</h1>
      <p>ë™ì˜ìƒì„ ì—…ë¡œë“œí•˜ë ¤ë©´ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.</p>
      <a href="{{ url_for('auth.login') }}" class="btn btn--primary">ë¡œê·¸ì¸</a>
    </div>
  </div>
{% endblock %}

{% block scripts %}
  {{ super() }}
  <script src="{{ url_for('static', filename='js/studio-upload-page.js') }}"></script>
{% endblock %}
