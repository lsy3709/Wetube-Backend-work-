{% extends "base.html" %}

{% block title %}Studio - WeTube{% endblock %}

{% block content %}
  <!-- ë¡œê·¸ì¸ ë¯¸ì—°ë™: StudioëŠ” ë¡œê·¸ì¸ ì—†ì´ ì ‘ê·¼ ê°€ëŠ¥ (ì—…ë¡œë“œ ì‹œ config.DEFAULT_USER_ID ì‚¬ìš©) -->
  <div class="studio-page">
    <div class="studio-header">
      <div class="studio-header-top">
        <h1 class="studio-title">ë‚´ ë™ì˜ìƒ</h1>
        <a href="{{ url_for('studio.upload') }}" class="btn btn--primary" id="btn-upload">
          <span>ğŸ“¤</span> ë™ì˜ìƒ ì—…ë¡œë“œ
        </a>
      </div>
      <div class="studio-stats">
        <div class="stat-card">
          <div class="stat-value">{{ video_count|default(0) }}</div>
          <div class="stat-label">ë™ì˜ìƒ</div>
        </div>
        <div class="stat-card">
          <div class="stat-value">{{ total_views|default(0) }}</div>
          <div class="stat-label">ì¡°íšŒìˆ˜</div>
        </div>
        <div class="stat-card">
          <div class="stat-value">0</div>
          <div class="stat-label">êµ¬ë…ì</div>
        </div>
      </div>
    </div>

    <div class="studio-toolbar">
      <div class="studio-search">
        <input type="search" class="studio-search-input" placeholder="ë™ì˜ìƒ ê²€ìƒ‰..." aria-label="ë™ì˜ìƒ ê²€ìƒ‰">
        <button type="button" class="studio-search-btn" aria-label="ê²€ìƒ‰">ğŸ”</button>
      </div>
      <div class="studio-filters">
        <select class="studio-filter-select">
          <option value="all">ì „ì²´</option>
          <option value="public">ê³µê°œ</option>
          <option value="unlisted">ì¼ë¶€ ê³µê°œ</option>
          <option value="private">ë¹„ê³µê°œ</option>
        </select>
        <select class="studio-filter-select">
          <option value="recent">ìµœì‹ ìˆœ</option>
          <option value="popular">ì¸ê¸°ìˆœ</option>
          <option value="title">ì œëª©ìˆœ</option>
        </select>
      </div>
    </div>

    <div class="studio-content">
      {% if not videos %}
      <div class="studio-empty" id="studio-empty">
        <div class="studio-empty-icon">ğŸ“¹</div>
        <h2>ë™ì˜ìƒì´ ì—†ìŠµë‹ˆë‹¤</h2>
        <p>ì²« ë™ì˜ìƒì„ ì—…ë¡œë“œí•˜ì—¬ ì‹œì‘í•˜ì„¸ìš”.</p>
        <a href="{{ url_for('studio.upload') }}" class="btn btn--primary" id="btn-upload-empty">ë™ì˜ìƒ ì—…ë¡œë“œ</a>
      </div>
      {% else %}
      <div class="studio-video-list" id="studio-video-list">
        <table class="video-table">
          <thead>
            <tr>
              <th class="col-thumbnail">ë™ì˜ìƒ</th>
              <th class="col-title">ì œëª©</th>
              <th class="col-visibility">ê³µê°œ ìƒíƒœ</th>
              <th class="col-restrictions">ì œí•œ</th>
              <th class="col-date">ë‚ ì§œ</th>
              <th class="col-views">ì¡°íšŒìˆ˜</th>
              <th class="col-comments">ëŒ“ê¸€</th>
              <th class="col-likes">ì¢‹ì•„ìš”</th>
              <th class="col-actions">ì‘ì—…</th>
            </tr>
          </thead>
          <tbody>
            {% for video in videos %}
            <tr class="video-row">
              <td class="col-thumbnail">
                <div class="video-thumbnail-small">
                  {% if video.thumbnail_path %}
                  <img src="{{ url_for('main.media_thumbnail', filename=video.thumbnail_path) }}" alt="" class="video-thumb-img">
                  {% else %}
                  <span>ğŸ“¹</span>
                  {% endif %}
                </div>
              </td>
              <td class="col-title">
                <div class="video-title-cell">
                  <a href="{{ url_for('main.watch', video_id=video.id) }}" class="video-title-text">{{ video.title }}</a>
                  <div class="video-title-meta">ë™ì˜ìƒ ID: {{ video.id }}</div>
                </div>
              </td>
              <td class="col-visibility">
                <span class="badge badge--public">ê³µê°œ</span>
              </td>
              <td class="col-restrictions">
                <span class="badge badge--none">ì—†ìŒ</span>
              </td>
              <td class="col-date">
                <div class="video-date">{{ video.created_at.strftime('%Y-%m-%d') if video.created_at else '-' }}</div>
              </td>
              <td class="col-views">{{ video.views }}</td>
              <td class="col-comments">0</td>
              <td class="col-likes">{{ video.likes }}</td>
              <td class="col-actions">
                <div class="action-menu">
                  <a href="{{ url_for('studio.edit', video_id=video.id) }}" class="action-btn" title="í¸ì§‘">âœï¸</a>
                  <button type="button" class="action-btn" title="ì‚­ì œ">ğŸ—‘ï¸</button>
                </div>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      {% endif %}
    </div>
  </div>
{% endblock %}

{% block scripts %}
  {{ super() }}
  <script src="{{ url_for('static', filename='js/studio-page.js') }}"></script>
{% endblock %}
