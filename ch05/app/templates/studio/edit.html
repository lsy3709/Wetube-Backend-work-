{% extends "base.html" %}

{% block title %}동영상 수정 - Studio - WeTube{% endblock %}

{% block content %}
  <div class="studio-page" data-logged-in-only>
    <div class="studio-header">
      <div class="studio-header-top">
        <h1 class="studio-title">동영상 수정</h1>
        <a href="{{ url_for('studio.index') }}" class="btn btn--outline">취소</a>
      </div>
    </div>

    <div class="upload-container">
      <p id="edit-msg" class="auth-msg" role="status" aria-live="polite"></p>
      <form id="edit-form" class="upload-form" method="post" action="#" enctype="multipart/form-data">
        <!-- 현재 동영상 미리보기 -->
        <div class="upload-section">
          <label class="upload-section-title">현재 동영상</label>
          <div class="edit-video-preview">
            <div class="edit-video-thumbnail">
              <span>📹</span>
            </div>
            <div class="edit-video-info">
              <p class="edit-video-filename">sample_video.mp4</p>
              <p class="edit-video-meta">업로드 날짜: 2026-01-25 | 조회수: 0회</p>
            </div>
          </div>
        </div>

        <!-- 제목 -->
        <div class="upload-section">
          <label for="edit-title" class="upload-section-title">제목 <span class="required">*</span></label>
          <input type="text" id="edit-title" name="title" class="upload-input" placeholder="동영상 제목을 입력하세요" maxlength="100" value="샘플 동영상" required>
          <small class="form-hint">최대 100자</small>
        </div>

        <!-- 설명 -->
        <div class="upload-section">
          <label for="edit-description" class="upload-section-title">설명</label>
          <textarea id="edit-description" name="description" class="upload-textarea" placeholder="동영상에 대한 설명을 입력하세요" rows="6" maxlength="5000">샘플 동영상 설명입니다.</textarea>
          <small class="form-hint">최대 5000자</small>
        </div>

        <!-- 썸네일 -->
        <div class="upload-section">
          <label class="upload-section-title">썸네일</label>
          <div class="upload-thumbnail-area">
            <input type="file" id="edit-thumbnail" name="thumbnail" accept="image/*" style="display: none;">
            <div class="upload-thumbnail-preview" id="edit-thumbnail-preview">
              <div class="upload-thumbnail-placeholder" id="edit-thumbnail-placeholder">
                <span>🖼️</span>
                <p>썸네일 없음</p>
              </div>
              <img id="edit-thumbnail-img" src="" alt="썸네일 미리보기" style="display: none;">
            </div>
            <div class="upload-thumbnail-actions">
              <label for="edit-thumbnail" class="btn btn--outline">썸네일 변경</label>
              <button type="button" class="btn btn--outline" id="edit-thumbnail-remove" style="display: none;">제거</button>
            </div>
          </div>
        </div>

        <!-- 공개 설정 -->
        <div class="upload-section">
          <label for="edit-visibility" class="upload-section-title">공개 설정 <span class="required">*</span></label>
          <select id="edit-visibility" name="visibility" class="upload-select" required>
            <option value="public" selected>공개</option>
            <option value="unlisted">일부 공개</option>
            <option value="private">비공개</option>
          </select>
          <small class="form-hint">공개: 누구나 볼 수 있음 | 일부 공개: 링크를 아는 사람만 볼 수 있음 | 비공개: 나만 볼 수 있음</small>
        </div>

        <!-- 저장/삭제 버튼 -->
        <div class="upload-actions">
          <button type="button" class="btn btn--danger btn--large" id="edit-delete-btn">
            삭제
          </button>
          <div class="upload-actions-right">
            <a href="{{ url_for('studio.index') }}" class="btn btn--outline btn--large">취소</a>
            <button type="submit" class="btn btn--primary btn--large" id="edit-submit-btn">
              저장
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>

  <div class="studio-logged-out" data-logged-out-only>
    <div class="hero">
      <h1>수정하려면 로그인이 필요합니다</h1>
      <p>동영상을 수정하려면 로그인해주세요.</p>
      <a href="{{ url_for('auth.login') }}" class="btn btn--primary">로그인</a>
    </div>
  </div>
{% endblock %}

{% block scripts %}
  {{ super() }}
  <script src="{{ url_for('static', filename='js/studio-edit-page.js') }}"></script>
{% endblock %}
