{% extends "base.html" %}

{% block title %}êµ¬ë… - WeTube{% endblock %}

{% block content %}
  <div class="subscriptions-page">
    <div class="subscriptions-header">
      <h1 class="subscriptions-title">êµ¬ë… í”¼ë“œ</h1>
      <p class="subscriptions-desc">êµ¬ë…í•œ ì±„ë„ì˜ ìµœì‹  ì˜ìƒì„ ëª¨ì•„ë´…ë‹ˆë‹¤.</p>
    </div>

    <div class="subscriptions-content">
      {% if videos and videos.total > 0 %}
      <div class="video-grid-subscriptions">
        {% for video in videos.items %}
        <article class="video-card">
          <a href="{{ url_for('main.watch', video_id=video.id) }}" class="video-card-link">
            <div class="video-card-thumb">
              {% if video.thumbnail_path %}
              <img src="{{ url_for('main.media_thumbnail', filename=video.thumbnail_path) }}" alt="" class="video-card-thumb-img">
              {% else %}
              <span>ğŸ“¹</span>
              {% endif %}
            </div>
            <h3 class="video-card-title">{{ video.title }}</h3>
          </a>
          <a href="{{ url_for('main.user_profile', username=video.user.username if video.user else 'default') }}" class="video-card-channel">{{ video.user.username if video.user else 'default' }}</a>
          <p class="video-card-meta">ì¡°íšŒìˆ˜ {{ video.views }}íšŒ Â· ì¢‹ì•„ìš” {{ video.likes|default(0) }}</p>
          <p class="video-card-time">{{ video.created_at.strftime('%Y-%m-%d') if video.created_at else '' }}</p>
        </article>
        {% endfor %}
      </div>

      <!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
      {% if videos.pages > 1 %}
      <nav class="pagination" aria-label="êµ¬ë… í”¼ë“œ í˜ì´ì§€">
        <div class="pagination-inner">
          {% if videos.has_prev %}
          <a href="{{ url_for('main.subscriptions', page=videos.prev_num) }}" class="pagination-link">ì´ì „</a>
          {% endif %}
          <span class="pagination-info">{{ videos.page }} / {{ videos.pages }}</span>
          {% if videos.has_next %}
          <a href="{{ url_for('main.subscriptions', page=videos.next_num) }}" class="pagination-link">ë‹¤ìŒ</a>
          {% endif %}
        </div>
      </nav>
      {% endif %}
      {% else %}
      <div class="subscriptions-empty" id="subscriptions-empty">
        <div class="empty-icon">ğŸ“º</div>
        <h2 class="empty-title">êµ¬ë…í•œ ì±„ë„ì´ ì—†ìŠµë‹ˆë‹¤</h2>
        <p class="empty-text">ê´€ì‹¬ ìˆëŠ” ì±„ë„ì„ êµ¬ë…í•˜ë©´ ìµœì‹  ì˜ìƒì„ ì‰½ê²Œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
        <a href="{{ url_for('main.index') }}" class="btn btn--primary">ë™ì˜ìƒ ë‘˜ëŸ¬ë³´ê¸°</a>
      </div>
      {% endif %}
    </div>
  </div>
{% endblock %}

{% block scripts %}
  {{ super() }}
  <script src="{{ url_for('static', filename='js/subscriptions-page.js') }}"></script>
{% endblock %}
